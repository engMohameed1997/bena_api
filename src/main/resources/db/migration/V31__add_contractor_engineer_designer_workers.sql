-- إضافة بيانات المقاولين والمهندسين والمصممين
 
-- إنشاء مستخدمين لهؤلاء العمال (مطلوب لعمود workers.user_id)
WITH seed_users AS (
    SELECT * FROM (VALUES
        ('00000000-0000-0000-0000-000000000101'::uuid, 'worker101@bena.local', '07812345678', 'أحمد محمد المقاول', 'WORKER'),
        ('00000000-0000-0000-0000-000000000102'::uuid, 'worker102@bena.local', '07834567890', 'محمود علي المقاول', 'WORKER'),
        ('00000000-0000-0000-0000-000000000103'::uuid, 'worker103@bena.local', '07856789012', 'سارة محمد المقاولة', 'WORKER'),
        ('00000000-0000-0000-0000-000000000104'::uuid, 'worker104@bena.local', '07878901234', 'حسين علي المقاول', 'WORKER'),
        ('00000000-0000-0000-0000-000000000201'::uuid, 'worker201@bena.local', '07823456789', 'علي حسن المهندس', 'WORKER'),
        ('00000000-0000-0000-0000-000000000202'::uuid, 'worker202@bena.local', '07845678901', 'فاطمة أحمد المهندسة', 'WORKER'),
        ('00000000-0000-0000-0000-000000000203'::uuid, 'worker203@bena.local', '07867890123', 'خالد إبراهيم المهندس', 'WORKER'),
        ('00000000-0000-0000-0000-000000000204'::uuid, 'worker204@bena.local', '07889012345', 'نور الدين المهندس', 'WORKER'),
        ('00000000-0000-0000-0000-000000000301'::uuid, 'worker301@bena.local', '07890123456', 'ليلى حسين المصممة', 'WORKER'),
        ('00000000-0000-0000-0000-000000000302'::uuid, 'worker302@bena.local', '07801234567', 'عمر صالح المصمم', 'WORKER'),
        ('00000000-0000-0000-0000-000000000303'::uuid, 'worker303@bena.local', '07812345679', 'رنا محمود المصممة', 'WORKER')
    ) AS v(id, email, phone, full_name, role)
)
INSERT INTO users (id, email, phone, password_hash, full_name, role, is_active, created_at, updated_at)
SELECT su.id,
       su.email,
       su.phone,
       '$2a$10$7EqJtq98hPqEX7fNZaFWoOHi7q8bWj8FQq2j6bZp3wO3f5i6t3x9S',
       su.full_name,
       su.role,
       TRUE,
       NOW(),
       NOW()
FROM seed_users su
WHERE NOT EXISTS (
    SELECT 1
    FROM users u
    WHERE u.email = su.email
);

-- مقاولون/مهندسون/مصممون
WITH seed_workers AS (
    SELECT * FROM (VALUES
        ('00000000-0000-0000-0000-000000000101'::uuid, 'أحمد محمد المقاول', 'CONTRACTOR', 'مقاول متخصص في البناء والترميم بخبرة 10 سنوات', '07812345678', '07812345678', 10, 'بغداد', 'الكرادة', 4.8, 25),
        ('00000000-0000-0000-0000-000000000102'::uuid, 'محمود علي المقاول', 'CONTRACTOR', 'مقاول متخصص في أعمال الكهرباء والسباكة', '07834567890', '07834567890', 12, 'بغداد', 'الزعفرانية', 4.9, 32),
        ('00000000-0000-0000-0000-000000000103'::uuid, 'سارة محمد المقاولة', 'CONTRACTOR', 'مقاول متخصص في أعمال الدهان والتشطيب', '07856789012', '07856789012', 7, 'بغداد', 'الكاظمية', 4.5, 15),
        ('00000000-0000-0000-0000-000000000104'::uuid, 'حسين علي المقاول', 'CONTRACTOR', 'مقاول عام متخصص في المشاريع الكبيرة', '07878901234', '07878901234', 15, 'بغداد', 'الأعظمية', 4.7, 28),
        ('00000000-0000-0000-0000-000000000201'::uuid, 'علي حسن المهندس', 'ENGINEER', 'مهندس معماري متخصص في التصميم الداخلي', '07823456789', '07823456789', 8, 'بغداد', 'المنصور', 4.6, 18),
        ('00000000-0000-0000-0000-000000000202'::uuid, 'فاطمة أحمد المهندسة', 'ENGINEER', 'مهندسة متخصصة في الديكور والتصميم', '07845678901', '07845678901', 6, 'بغداد', 'الجادرية', 4.7, 21),
        ('00000000-0000-0000-0000-000000000203'::uuid, 'خالد إبراهيم المهندس', 'ENGINEER', 'مهندس متخصص في الهندسة المدنية', '07867890123', '07867890123', 15, 'بغداد', 'الرصافة', 4.9, 40),
        ('00000000-0000-0000-0000-000000000204'::uuid, 'نور الدين المهندس', 'ENGINEER', 'مهندس إنشائي متخصص في المباني الضخمة', '07889012345', '07889012345', 12, 'بغداد', 'الكرخ', 4.8, 35),
        ('00000000-0000-0000-0000-000000000301'::uuid, 'ليلى حسين المصممة', 'DESIGNER', 'مصممة داخلية متخصصة في التصاميم العصرية', '07890123456', '07890123456', 9, 'بغداد', 'الحارثية', 4.9, 30),
        ('00000000-0000-0000-0000-000000000302'::uuid, 'عمر صالح المصمم', 'DESIGNER', 'مصمم معماري متخصص في الواجهات', '07801234567', '07801234567', 11, 'بغداد', 'اليرموك', 4.6, 22),
        ('00000000-0000-0000-0000-000000000303'::uuid, 'رنا محمود المصممة', 'DESIGNER', 'مصممة ديكور متخصصة في المنازل الفاخرة', '07812345679', '07812345679', 7, 'بغداد', 'الجادرية', 4.8, 26)
    ) AS v(user_id, name, category, description, phone_number, whatsapp_number, experience_years, city, area, average_rating, review_count)
)
INSERT INTO workers (user_id, name, category, description, phone_number, whatsapp_number, experience_years, city, area, is_active, average_rating, review_count, created_at, updated_at)
SELECT sw.user_id,
       sw.name,
       sw.category,
       sw.description,
       sw.phone_number,
       sw.whatsapp_number,
       sw.experience_years,
       sw.city,
       sw.area,
       TRUE,
       sw.average_rating,
       sw.review_count,
       NOW(),
       NOW()
FROM seed_workers sw
WHERE NOT EXISTS (
    SELECT 1
    FROM workers w
    WHERE w.user_id = sw.user_id
);
